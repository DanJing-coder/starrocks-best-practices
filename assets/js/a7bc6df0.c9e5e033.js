"use strict";(self.webpackChunkstarrocks_best_practices=self.webpackChunkstarrocks_best_practices||[]).push([[1222],{5060:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>d,default:()=>j,frontMatter:()=>c,metadata:()=>l,toc:()=>h});const l=JSON.parse('{"id":"troubleshooting/troubleshooting","title":"\u6545\u969c\u5904\u7406","description":"\u672c\u7ae0\u65e8\u5728\u63d0\u4f9b\u4e00\u4e2a\u7cfb\u7edf\u6027\u7684\u6545\u969c\u5904\u7406\u6846\u67b6\uff0c\u5e2e\u52a9\u60a8\u5728\u9047\u5230 StarRocks \u96c6\u7fa4\u95ee\u9898\u65f6\uff0c\u80fd\u591f\u5feb\u901f\u3001\u6709\u6548\u5730\u5b9a\u4f4d\u5e76\u89e3\u51b3\u95ee\u9898\u3002","source":"@site/docs/troubleshooting/troubleshooting.md","sourceDirName":"troubleshooting","slug":"/troubleshooting/","permalink":"/docs/troubleshooting/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u96c6\u7fa4\u5de1\u68c0","permalink":"/docs/Monitor/inspection"},"next":{"title":"\u6545\u969c\u5904\u7406\uff1a\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3","permalink":"/docs/troubleshooting/disk_capacity"}}');var i=s(4848),r=s(8453);const c={},d="\u6545\u969c\u5904\u7406",o={},h=[{value:"1. \u6545\u969c\u6392\u67e5\u57fa\u672c\u601d\u8def",id:"1-\u6545\u969c\u6392\u67e5\u57fa\u672c\u601d\u8def",level:2},{value:"2. \u6838\u5fc3\u6392\u67e5\u5de5\u5177",id:"2-\u6838\u5fc3\u6392\u67e5\u5de5\u5177",level:2},{value:"3. \u5e38\u89c1\u6545\u969c\u573a\u666f\u4e0e\u6392\u67e5\u6307\u5357",id:"3-\u5e38\u89c1\u6545\u969c\u573a\u666f\u4e0e\u6392\u67e5\u6307\u5357",level:2},{value:"3.1 \u8282\u70b9\u6545\u969c (FE / BE Down)",id:"31-\u8282\u70b9\u6545\u969c-fe--be-down",level:3},{value:"3.2 \u5bfc\u5165\u95ee\u9898",id:"32-\u5bfc\u5165\u95ee\u9898",level:3},{value:"a. \u5bfc\u5165\u4efb\u52a1\u8d85\u65f6",id:"a-\u5bfc\u5165\u4efb\u52a1\u8d85\u65f6",level:4},{value:"b. \u6570\u636e\u8d28\u91cf\u95ee\u9898",id:"b-\u6570\u636e\u8d28\u91cf\u95ee\u9898",level:4},{value:"3.3 \u67e5\u8be2\u6027\u80fd\u95ee\u9898 (\u6162\u67e5\u8be2)",id:"33-\u67e5\u8be2\u6027\u80fd\u95ee\u9898-\u6162\u67e5\u8be2",level:3},{value:"3.4 \u78c1\u76d8\u7a7a\u95f4\u95ee\u9898",id:"34-\u78c1\u76d8\u7a7a\u95f4\u95ee\u9898",level:3},{value:"3.5 Tablet \u526f\u672c\u95ee\u9898",id:"35-tablet-\u526f\u672c\u95ee\u9898",level:3}];function x(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"\u6545\u969c\u5904\u7406",children:"\u6545\u969c\u5904\u7406"})}),"\n",(0,i.jsx)(e.p,{children:"\u672c\u7ae0\u65e8\u5728\u63d0\u4f9b\u4e00\u4e2a\u7cfb\u7edf\u6027\u7684\u6545\u969c\u5904\u7406\u6846\u67b6\uff0c\u5e2e\u52a9\u60a8\u5728\u9047\u5230 StarRocks \u96c6\u7fa4\u95ee\u9898\u65f6\uff0c\u80fd\u591f\u5feb\u901f\u3001\u6709\u6548\u5730\u5b9a\u4f4d\u5e76\u89e3\u51b3\u95ee\u9898\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"1-\u6545\u969c\u6392\u67e5\u57fa\u672c\u601d\u8def",children:"1. \u6545\u969c\u6392\u67e5\u57fa\u672c\u601d\u8def"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u4e2a\u6709\u6548\u7684\u6545\u969c\u6392\u67e5\u6d41\u7a0b\u901a\u5e38\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u660e\u786e\u73b0\u8c61\uff1a"})," \u95ee\u9898\u7684\u5177\u4f53\u8868\u73b0\u662f\u4ec0\u4e48\uff1f\u662f\u8282\u70b9\u5b95\u673a\u3001\u5bfc\u5165\u5931\u8d25\uff0c\u8fd8\u662f\u67e5\u8be2\u53d8\u6162\uff1f"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6536\u96c6\u4fe1\u606f\uff1a"})," \u5229\u7528 StarRocks \u63d0\u4f9b\u7684\u5404\u79cd\u5de5\u5177\uff08SQL \u547d\u4ee4\u3001\u65e5\u5fd7\u3001\u76d1\u63a7\u3001Profile\uff09\u6536\u96c6\u4e0e\u73b0\u8c61\u76f8\u5173\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5206\u6790\u539f\u56e0\uff1a"})," \u57fa\u4e8e\u6536\u96c6\u5230\u7684\u4fe1\u606f\uff0c\u7ed3\u5408 StarRocks \u7684\u5de5\u4f5c\u539f\u7406\uff0c\u5206\u6790\u5bfc\u81f4\u95ee\u9898\u7684\u53ef\u80fd\u539f\u56e0\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9a8c\u8bc1\u5047\u8bbe\uff1a"})," \u5bf9\u53ef\u80fd\u7684\u6839\u672c\u539f\u56e0\u8fdb\u884c\u9a8c\u8bc1\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u95ee\u9898\uff1a"})," \u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u89e3\u51b3\u95ee\u9898\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u590d\u76d8\u603b\u7ed3\uff1a"})," \u8bb0\u5f55\u95ee\u9898\u3001\u539f\u56e0\u548c\u89e3\u51b3\u65b9\u6848\uff0c\u5f62\u6210\u77e5\u8bc6\u5e93\uff0c\u5e76\u601d\u8003\u5982\u4f55\u4ece\u6d41\u7a0b\u6216\u7cfb\u7edf\u5c42\u9762\u907f\u514d\u95ee\u9898\u518d\u6b21\u53d1\u751f\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"2-\u6838\u5fc3\u6392\u67e5\u5de5\u5177",children:"2. \u6838\u5fc3\u6392\u67e5\u5de5\u5177"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"SQL \u547d\u4ee4:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"SHOW FRONTENDS;"})," / ",(0,i.jsx)(e.code,{children:"SHOW BACKENDS;"}),": \u67e5\u770b FE/BE \u8282\u70b9\u7684\u72b6\u6001\uff0c\u662f\u6392\u67e5\u8282\u70b9\u95ee\u9898\u7684\u7b2c\u4e00\u6b65\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"SHOW PROC '/';"}),": \u8bbf\u95ee StarRocks \u7684 Proc \u7cfb\u7edf\uff0c\u53ef\u4ee5\u83b7\u53d6\u5927\u91cf\u5185\u90e8\u72b6\u6001\u4fe1\u606f\uff0c\u5982 Tablet \u72b6\u6001\u3001\u96c6\u7fa4\u8d1f\u8f7d\u5747\u8861\u60c5\u51b5\u7b49\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"SHOW LOAD;"})," / ",(0,i.jsx)(e.code,{children:"SHOW ROUTINE LOAD;"}),": \u67e5\u770b\u5bfc\u5165\u4efb\u52a1\u7684\u72b6\u6001\u548c\u9519\u8bef\u4fe1\u606f\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"ADMIN SHOW REPLICA STATUS;"}),": \u68c0\u67e5\u526f\u672c\u7684\u5065\u5eb7\u72b6\u51b5\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u65e5\u5fd7\u6587\u4ef6:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.strong,{children:[(0,i.jsx)(e.code,{children:"fe.log"}),":"]})," FE \u7684\u8fd0\u884c\u65e5\u5fd7\uff0c\u8bb0\u5f55\u4e86\u5143\u6570\u636e\u64cd\u4f5c\u3001\u4efb\u52a1\u8c03\u5ea6\u7b49\u4fe1\u606f\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.strong,{children:[(0,i.jsx)(e.code,{children:"be.INFO"}),":"]})," BE \u7684\u8fd0\u884c\u65e5\u5fd7\uff0c\u8bb0\u5f55\u4e86\u67e5\u8be2\u6267\u884c\u3001Compaction\u3001\u6570\u636e\u5bfc\u5165\u7b49\u8be6\u7ec6\u4fe1\u606f\u3002\u662f\u6392\u67e5 BE \u95ee\u9898\u7684\u6838\u5fc3\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.strong,{children:[(0,i.jsx)(e.code,{children:"fe.audit.log"}),":"]})," \u5ba1\u8ba1\u65e5\u5fd7\uff0c\u7528\u4e8e\u5206\u6790\u67e5\u8be2\u5386\u53f2\u3001\u6162\u67e5\u8be2\u548c\u7528\u6237\u884c\u4e3a\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u76d1\u63a7\u7cfb\u7edf (Prometheus + Grafana):"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u76d1\u63a7\u5927\u76d8\u53ef\u4ee5\u76f4\u89c2\u5730\u770b\u5230\u96c6\u7fa4\u7684 CPU\u3001\u5185\u5b58\u3001I/O\u3001\u7f51\u7edc\u7b49\u8d44\u6e90\u4f7f\u7528\u8d8b\u52bf\uff0c\u4ee5\u53ca QPS\u3001\u67e5\u8be2\u5ef6\u8fdf\u7b49\u6838\u5fc3\u4e1a\u52a1\u6307\u6807\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Query Profile:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5bf9\u4e8e\u6162\u67e5\u8be2\u95ee\u9898\uff0cQuery Profile \u662f\u6700\u5f3a\u5927\u7684\u5206\u6790\u5de5\u5177\u3002\u5b83\u8be6\u7ec6\u8bb0\u5f55\u4e86\u67e5\u8be2\u5728\u6bcf\u4e2a\u9636\u6bb5\u3001\u6bcf\u4e2a\u7b97\u5b50\u4e0a\u7684\u8017\u65f6\u548c\u5904\u7406\u7684\u6570\u636e\u91cf\uff0c\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7cbe\u786e\u5b9a\u4f4d\u6027\u80fd\u74f6\u9888\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"3-\u5e38\u89c1\u6545\u969c\u573a\u666f\u4e0e\u6392\u67e5\u6307\u5357",children:"3. \u5e38\u89c1\u6545\u969c\u573a\u666f\u4e0e\u6392\u67e5\u6307\u5357"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u6545\u969c\u573a\u666f\u53ca\u5176\u6392\u67e5\u601d\u8def\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"31-\u8282\u70b9\u6545\u969c-fe--be-down",children:"3.1 \u8282\u70b9\u6545\u969c (FE / BE Down)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u73b0\u8c61:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"SHOW FRONTENDS;"})," \u6216 ",(0,i.jsx)(e.code,{children:"SHOW BACKENDS;"})," \u4e2d\uff0c\u5bf9\u5e94\u8282\u70b9\u7684 ",(0,i.jsx)(e.code,{children:"Alive"})," \u72b6\u6001\u4e3a ",(0,i.jsx)(e.code,{children:"false"}),"\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u8fde\u63a5 FE \u6216 BE \u7684\u7aef\u53e3\u5931\u8d25\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u76d1\u63a7\u7cfb\u7edf\u89e6\u53d1\u8282\u70b9\u79bb\u7ebf\u544a\u8b66\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6392\u67e5\u601d\u8def:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u767b\u5f55\u670d\u52a1\u5668:"})," \u767b\u5f55\u5230\u6545\u969c\u8282\u70b9\u670d\u52a1\u5668\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u68c0\u67e5\u8fdb\u7a0b:"})," \u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"ps -ef | grep starrocks"})," \u68c0\u67e5 ",(0,i.jsx)(e.code,{children:"StarRocksFe"})," \u6216 ",(0,i.jsx)(e.code,{children:"starrocks_be"})," \u8fdb\u7a0b\u662f\u5426\u5b58\u5728\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u68c0\u67e5\u7aef\u53e3:"})," \u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"netstat -ntlp"})," \u68c0\u67e5\u76f8\u5173\u7aef\u53e3\u662f\u5426\u88ab\u76d1\u542c\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u67e5\u770b\u65e5\u5fd7:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u8fdb\u7a0b\u4e0d\u5b58\u5728\uff0c\u67e5\u770b\u5bf9\u5e94\u7ec4\u4ef6\u7684 ",(0,i.jsx)(e.code,{children:".out"})," \u65e5\u5fd7\uff08\u5982 ",(0,i.jsx)(e.code,{children:"fe.out"}),"\uff09\u548c ",(0,i.jsx)(e.code,{children:".log"})," \u65e5\u5fd7\uff0c\u67e5\u627e\u542f\u52a8\u5931\u8d25\u7684\u539f\u56e0\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6700\u5e38\u89c1\u7684\u539f\u56e0\u662f ",(0,i.jsx)(e.strong,{children:"OOM (Out of Memory)"}),"\uff0c\u53ef\u4ee5\u68c0\u67e5\u7cfb\u7edf\u65e5\u5fd7\uff08\u5982 ",(0,i.jsx)(e.code,{children:"/var/log/messages"}),"\uff09\u4e2d\u662f\u5426\u6709 ",(0,i.jsx)(e.code,{children:"oom-killer"})," \u7684\u8bb0\u5f55\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u68c0\u67e5\u786c\u4ef6:"})," \u68c0\u67e5\u670d\u52a1\u5668\u7684 CPU\u3001\u5185\u5b58\u3001\u78c1\u76d8\u548c\u7f51\u7edc\u662f\u5426\u6b63\u5e38\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"32-\u5bfc\u5165\u95ee\u9898",children:"3.2 \u5bfc\u5165\u95ee\u9898"}),"\n",(0,i.jsx)(e.h4,{id:"a-\u5bfc\u5165\u4efb\u52a1\u8d85\u65f6",children:"a. \u5bfc\u5165\u4efb\u52a1\u8d85\u65f6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u73b0\u8c61:"})," ",(0,i.jsx)(e.code,{children:"SHOW LOAD"})," \u72b6\u6001\u4e3a ",(0,i.jsx)(e.code,{children:"CANCELLED"}),"\uff0c\u9519\u8bef\u4fe1\u606f\u4e3a ",(0,i.jsx)(e.code,{children:"load reached timeout"}),"\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6392\u67e5\u4e0e\u89e3\u51b3\u65b9\u6848:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bf7\u53c2\u8003\u8be6\u7ec6\u6307\u5357\uff1a\u5bfc\u5165\u4efb\u52a1\u8d85\u65f6 (Load Reached Timeout)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"b-\u6570\u636e\u8d28\u91cf\u95ee\u9898",children:"b. \u6570\u636e\u8d28\u91cf\u95ee\u9898"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u73b0\u8c61:"})," ",(0,i.jsx)(e.code,{children:"SHOW LOAD"})," \u72b6\u6001\u4e3a ",(0,i.jsx)(e.code,{children:"CANCELLED"}),"\uff0c\u9519\u8bef\u4fe1\u606f\u5305\u542b ",(0,i.jsx)(e.code,{children:"ETL_QUALITY_UNSATISFIED"})," \u6216 ",(0,i.jsx)(e.code,{children:"TypeConvertError"}),"\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6392\u67e5\u601d\u8def:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4ece ",(0,i.jsx)(e.code,{children:"SHOW LOAD"})," \u7684\u7ed3\u679c\u6216 Stream Load \u7684\u8fd4\u56de JSON \u4e2d\u627e\u5230 ",(0,i.jsx)(e.code,{children:"ErrorURL"}),"\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u8bbf\u95ee\u8be5 URL\uff0c\u67e5\u770b\u5177\u4f53\u7684\u9519\u8bef\u884c\u548c\u9519\u8bef\u539f\u56e0\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u6839\u636e\u9519\u8bef\u4fe1\u606f\u6e05\u6d17\u6e90\u5934\u6570\u636e\uff0c\u6216\u8c03\u6574\u5efa\u8868\u8bed\u53e5\u4e2d\u7684\u5b57\u6bb5\u7c7b\u578b\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"33-\u67e5\u8be2\u6027\u80fd\u95ee\u9898-\u6162\u67e5\u8be2",children:"3.3 \u67e5\u8be2\u6027\u80fd\u95ee\u9898 (\u6162\u67e5\u8be2)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u73b0\u8c61:"})," \u7279\u5b9a SQL \u67e5\u8be2\u8017\u65f6\u8fdc\u8d85\u9884\u671f\uff0c\u6216\u96c6\u7fa4\u6574\u4f53 CPU/\u5185\u5b58\u4f7f\u7528\u7387\u8fc7\u9ad8\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6392\u67e5\u601d\u8def:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u83b7\u53d6 Profile:"})," \u4e3a\u6162\u67e5\u8be2\u5f00\u542f Profile (",(0,i.jsx)(e.code,{children:"SET enable_profile=true;"}),") \u5e76\u6267\u884c\uff0c\u7136\u540e\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"SHOW PROFILELIST;"})," \u83b7\u53d6 ",(0,i.jsx)(e.code,{children:"Query ID"}),"\uff0c\u518d\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"SHOW PROFILE FOR QUERY <query_id>;"})," \u67e5\u770b\u8be6\u7ec6 Profile\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5206\u6790 Profile:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u627e\u5230\u8017\u65f6\u6700\u957f\u7684\u7b97\u5b50\uff08Operator\uff09\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u68c0\u67e5 ",(0,i.jsx)(e.code,{children:"Scan"})," \u7b97\u5b50\u7684 ",(0,i.jsx)(e.code,{children:"RowsRead"})," \u662f\u5426\u8fc7\u5927\uff0c\u662f\u5426\u6709\u6548\u5229\u7528\u4e86\u5206\u533a\u548c\u7d22\u5f15\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u68c0\u67e5 ",(0,i.jsx)(e.code,{children:"HashJoin"})," \u7b97\u5b50\u662f\u5426\u53d1\u751f\u4e86\u6ea2\u5199 (",(0,i.jsx)(e.code,{children:"Spill"}),")\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5206\u6790\u6267\u884c\u8ba1\u5212:"})," \u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"EXPLAIN"})," \u67e5\u770b\u4f18\u5316\u5668\u9009\u62e9\u7684\u6267\u884c\u8ba1\u5212\u662f\u5426\u5408\u7406\uff0c\u7279\u522b\u662f Join \u987a\u5e8f\u548c Join \u7c7b\u578b\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u68c0\u67e5\u7edf\u8ba1\u4fe1\u606f:"})," \u786e\u8ba4\u76f8\u5173\u8868\u7684\u7edf\u8ba1\u4fe1\u606f\u662f\u5426\u5df2\u6536\u96c6\u4e14\u4e3a\u6700\u65b0\u3002\u8fc7\u65f6\u7684\u7edf\u8ba1\u4fe1\u606f\u4f1a\u5bfc\u81f4 CBO \u505a\u51fa\u9519\u8bef\u7684\u51b3\u7b56\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"34-\u78c1\u76d8\u7a7a\u95f4\u95ee\u9898",children:"3.4 \u78c1\u76d8\u7a7a\u95f4\u95ee\u9898"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u73b0\u8c61:"})," \u6536\u5230\u78c1\u76d8\u4f7f\u7528\u7387\u544a\u8b66\uff0c\u5bfc\u5165\u4efb\u52a1\u62a5 ",(0,i.jsx)(e.code,{children:"disk reach capacity limit"}),"\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6392\u67e5\u4e0e\u89e3\u51b3\u65b9\u6848:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bf7\u53c2\u8003\u8be6\u7ec6\u6307\u5357\uff1a\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"35-tablet-\u526f\u672c\u95ee\u9898",children:"3.5 Tablet \u526f\u672c\u95ee\u9898"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u73b0\u8c61:"})," ",(0,i.jsx)(e.code,{children:"SHOW PROC '/statistic';"})," \u4e2d ",(0,i.jsx)(e.code,{children:"abnormal_tablets_num"})," \u7684\u503c\u5927\u4e8e 0\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6392\u67e5\u601d\u8def:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u6267\u884c ",(0,i.jsx)(e.code,{children:"ADMIN SHOW REPLICA STATUS FROM your_db.your_tbl WHERE status != 'OK';"})," \u6765\u5b9a\u4f4d\u5177\u4f53\u7684\u5f02\u5e38\u526f\u672c\u53ca\u5176\u539f\u56e0\uff08\u5982 ",(0,i.jsx)(e.code,{children:"VERSION_ERROR"}),", ",(0,i.jsx)(e.code,{children:"SCHEMA_ERROR"}),"\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5bf9\u4e8e\u5927\u90e8\u5206\u526f\u672c\u95ee\u9898\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"ADMIN REPAIR TABLE your_db.your_tbl;"})," \u6765\u8ba9\u7cfb\u7edf\u81ea\u52a8\u8fdb\u884c\u4fee\u590d\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679c\u81ea\u52a8\u4fee\u590d\u5931\u8d25\uff0c\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u7684\u9519\u8bef\u72b6\u6001\uff0c\u8003\u8651\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"ADMIN SET REPLICA STATUS"})," \u547d\u4ee4\u624b\u52a8\u5c06\u5f02\u5e38\u526f\u672c\u8bbe\u7f6e\u4e3a ",(0,i.jsx)(e.code,{children:"BAD"}),"\uff0c\u5f3a\u5236\u7cfb\u7edf\u4f7f\u7528\u5176\u4ed6\u5065\u5eb7\u526f\u672c\u91cd\u65b0\u514b\u9686\u4e00\u4e2a\u65b0\u7684\u526f\u672c\u3002",(0,i.jsx)(e.strong,{children:"\u6b64\u4e3a\u9ad8\u5371\u64cd\u4f5c\uff0c\u8bf7\u8c28\u614e\u6267\u884c\u3002"})]}),"\n"]}),"\n"]}),"\n"]})]})}function j(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(x,{...n})}):x(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>d});var l=s(6540);const i={},r=l.createContext(i);function c(n){const e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);